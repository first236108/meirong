{include file="public/header" /}
{include file="public/breadcrumb" /}
<div class="wrapper wrapper-content animated fadeIn ecommerce">

    <div class="p-w-md m-t-sm">

        <div class="row">
            <div class="col-lg-12" id="main" style="height:350px;"></div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="ibox">

                    <div class="ibox-content">

                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="control-label" for="product_name">Project Name</label>
                                    <input type="text" id="product_name" name="product_name" value="" placeholder="Project Name" class="form-control">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="control-label" for="price">Name</label>
                                    <input type="text" id="price" name="price" value="" placeholder="Name" class="form-control">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="control-label" for="status">Status</label>
                                    <select name="status" id="status" class="form-control">
                                        <option value="1" selected="">Completed</option>
                                        <option value="0">Pending</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <tbody>
                                    <tr>
                                    <td>1</td>
                                    <td>Master project</td>
                                    <td>Patrick Smith</td>
                                    <td>$892,074</td>
                                    <td>Inceptos Hymenaeos Ltd</td>
                                    <td><strong>20%</strong></td>
                                    <td>Jul 14, 2015</td>
                                    <td><a href="#"><i class="fa fa-check text-navy"></i></a></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>

</div>

<script src="/static/plugins/echarts/echarts.js"></script>
<script>

    $(function () {
        init();
    });

    var myChart = echarts.init(document.getElementById('main'));

    var option={
        title : {
            text: '充值收入报表',
            subtext: '默认显示7天数据'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        legend: {
            data: []
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'value'
        },
        yAxis: {
            type: 'category',
            data: []
        },
        series: []
    };

    function init() {
        myChart.showLoading();
        $.ajax({
            type: 'POST',
            url: "{:url('/admin/report/income')}",
            data: {name: 'Zepto.js'},
            success: function (data) {
                option.legend.data=objToArray(data.admin);
                option.yAxis.data=data.date;
                option.series=[];
                for (var k in data.confirm_ids){
                    option.series.push({
                        name: data.admin[data.confirm_ids[k]],
                        type: 'bar',
                        stack: '总量',
                        label: {
                            normal: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        data: objToArray(data.series[data.confirm_ids[k]])
                    });
                }

                myChart.hideLoading();
                myChart.setOption(option);
            },
            error: function (xhr, type) {
                myChart.hideLoading();
                err(xhr.responseText);
            }
        });
    }
    window.onresize = function () {
        myChart.resize();
    }
</script>
{include file="public/footer" /}